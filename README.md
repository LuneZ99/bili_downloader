# Bili Downloader | Bç«™è§†é¢‘ä¸‹è½½å·¥å…·

### ğŸ“ é¡¹ç›®ä»‹ç»

Bili Downloader æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Bilibili è§†é¢‘ä¸‹è½½å·¥å…·ï¼Œæ”¯æŒé«˜ç”»è´¨è§†é¢‘ä¸‹è½½ã€æ‰¹é‡ä¸‹è½½ã€åˆé›†ä¸‹è½½ç­‰å¤šç§åŠŸèƒ½ã€‚é‡‡ç”¨ç°ä»£åŒ–çš„å¼‚æ­¥æ¶æ„ï¼Œæä¾›é«˜æ•ˆç¨³å®šçš„ä¸‹è½½ä½“éªŒã€‚

### âœ¨ åŠŸèƒ½ç‰¹æ€§

#### è§†é¢‘ä¸‹è½½åŠŸèƒ½
- ğŸ¥ **å•ä¸ªè§†é¢‘ä¸‹è½½** - æ”¯æŒé€šè¿‡ BVID ä¸‹è½½ä»»æ„è§†é¢‘
- ğŸ‘¤ **ç”¨æˆ·è§†é¢‘æ‰¹é‡ä¸‹è½½** - ä¸‹è½½æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰æŠ•ç¨¿è§†é¢‘
- ğŸ“š **åˆé›†ä¸‹è½½** - æ”¯æŒä¸‹è½½å®Œæ•´çš„è§†é¢‘åˆé›†/ç³»åˆ—
- ğŸ“‹ **è§†é¢‘åˆ—è¡¨æŸ¥çœ‹** - æµè§ˆç”¨æˆ·è§†é¢‘å’Œåˆé›†ä¿¡æ¯
- ğŸ” **ç™»å½•æ”¯æŒ** - æ”¯æŒç™»å½•è·å–é«˜ç”»è´¨è§†é¢‘
- âš¡ **å¹¶å‘ä¸‹è½½** - å¯è°ƒèŠ‚çš„å¤šçº¿ç¨‹å¹¶å‘ä¸‹è½½
- ğŸ¨ **è‡ªåŠ¨ç”»è´¨é€‰æ‹©** - æ ¹æ®è´¦å·æƒé™è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç”»è´¨
- ğŸ”„ **è‡ªåŠ¨æ ¼å¼å¤„ç†** - æ”¯æŒ FLV/MP4/DASH æ ¼å¼è‡ªåŠ¨è½¬æ¢
- ğŸ“ **æ™ºèƒ½ç›®å½•ç®¡ç†** - è‡ªåŠ¨åˆ›å»ºåˆ†ç±»ä¸‹è½½ç›®å½•

#### åŠ¨æ€çˆ¬å–åŠŸèƒ½ ğŸ†•
- ğŸ“± **ç”¨æˆ·åŠ¨æ€è·å–** - è·å–æŒ‡å®šç”¨æˆ·çš„å…¨éƒ¨åŠ¨æ€
- ğŸ’¬ **è¯„è®ºå®Œæ•´çˆ¬å–** - é»˜è®¤è·å–å…¨éƒ¨è¯„è®ºå’Œæ¥¼ä¸­æ¥¼å›å¤
- ğŸ“Š **æ•°æ®ç»“æ„åŒ–ä¿å­˜** - JSON æ ¼å¼ä¿å­˜ï¼Œä¾¿äºåç»­åˆ†æ
- ğŸš€ **å¹¶å‘å¤„ç†** - æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘çˆ¬å–è¯„è®º
- ğŸ¯ **çµæ´»é…ç½®** - å¯é€‰æ‹©æ€§é™åˆ¶è¯„è®ºæ•°é‡ã€å¹¶å‘æ•°ç­‰
- ğŸ”„ **å¢é‡æ›´æ–°** - æ”¯æŒè·³è¿‡å·²å­˜åœ¨æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ 

### ğŸ› ï¸ ç³»ç»Ÿè¦æ±‚

- **Python**: 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- **FFmpeg**: ç”¨äºè§†é¢‘æ ¼å¼è½¬æ¢ï¼ˆå¿…éœ€ï¼‰
- **æ“ä½œç³»ç»Ÿ**: Windows / macOS / Linux

### ğŸ“¦ å®‰è£…è¯´æ˜

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/LuneZ99/bili_downloader.git
cd bili_downloader
```

#### 2. å®‰è£… Python ä¾èµ–
```bash
pip install -r requirements.txt
```

#### 3. å®‰è£… FFmpeg
```bash
# Ubuntu/Debian
sudo apt update && sudo apt install ffmpeg

# macOS (ä½¿ç”¨ Homebrew)
brew install ffmpeg

# Windows (ä½¿ç”¨ Chocolatey)
choco install ffmpeg

# æˆ–ä»å®˜ç½‘ä¸‹è½½: https://ffmpeg.org/download.html
```

#### 4. éªŒè¯å®‰è£…
```bash
python bili_cli.py --help
ffmpeg -version
```

### ğŸ”‘ é…ç½®è¯´æ˜

#### ç™»å½•å‡­æ®é…ç½®ï¼ˆå¯é€‰ä½†æ¨èï¼‰

ä¸ºäº†è·å–é«˜ç”»è´¨è§†é¢‘ï¼Œå»ºè®®é…ç½® Bç«™ ç™»å½•å‡­æ®ï¼š

1. **å¤åˆ¶é…ç½®æ¨¡æ¿**
```bash
cp credentials.json.example credentials.json
```

2. **è·å–ç™»å½•å‡­æ®**
   - ç™»å½• [bilibili.com](https://www.bilibili.com)
   - æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
   - åˆ‡æ¢åˆ° Network é€‰é¡¹å¡
   - åˆ·æ–°é¡µé¢ï¼Œæ‰¾åˆ°ä»»æ„è¯·æ±‚
   - åœ¨è¯·æ±‚å¤´ä¸­å¤åˆ¶ä»¥ä¸‹ Cookie å€¼ï¼š
     - `SESSDATA`
     - `bili_jct`
     - `buvid3`
     - `DedeUserID`

3. **ç¼–è¾‘é…ç½®æ–‡ä»¶**
```json
{
  "SESSDATA": "ä½ çš„SESSDATAå€¼",
  "bili_jct": "ä½ çš„bili_jctå€¼", 
  "buvid3": "ä½ çš„buvid3å€¼",
  "DedeUserID": "ä½ çš„DedeUserIDå€¼"
}
```

#### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¯é€‰ï¼‰
```bash
export BILI_SESSDATA="ä½ çš„SESSDATAå€¼"
export BILI_JCT="ä½ çš„bili_jctå€¼"
export BILI_BUVID3="ä½ çš„buvid3å€¼"
export BILI_DEDEUSERID="ä½ çš„DedeUserIDå€¼"
```

### ğŸš€ ä½¿ç”¨æ–¹æ³•

#### åŸºæœ¬å‘½ä»¤

```bash
# æŸ¥çœ‹å¸®åŠ©
python bili_cli.py --help

# æŸ¥çœ‹æ”¯æŒçš„ç”»è´¨æ ¼å¼
python bili_cli.py --show-formats
```

#### è§†é¢‘ç›¸å…³æ“ä½œ

```bash
# åˆ—å‡ºç”¨æˆ·æ‰€æœ‰è§†é¢‘
python bili_cli.py list-videos 477317922

# ä¸‹è½½å•ä¸ªè§†é¢‘
python bili_cli.py download-video BV1FQbPzKEA8

# ä¸‹è½½å•ä¸ªè§†é¢‘åˆ°æŒ‡å®šç›®å½•
python bili_cli.py download-video BV1FQbPzKEA8 --dir /path/to/download

# ä¸‹è½½ç”¨æˆ·æ‰€æœ‰è§†é¢‘
python bili_cli.py download-user 477317922

# æŒ‡å®šå¹¶å‘æ•°ä¸‹è½½ç”¨æˆ·è§†é¢‘
python bili_cli.py download-user 477317922 --concurrent 5
```

#### åˆé›†ç›¸å…³æ“ä½œ

```bash
# åˆ—å‡ºç”¨æˆ·æ‰€æœ‰åˆé›†
python bili_cli.py list-series 477317922

# åˆ—å‡ºåˆé›†ä¸­çš„æ‰€æœ‰è§†é¢‘
python bili_cli.py list-series-videos 123456

# ä¸‹è½½æ•´ä¸ªåˆé›†
python bili_cli.py download-series 123456

# æŒ‡å®šåˆé›†ç±»å‹ä¸‹è½½
python bili_cli.py download-series 123456 --type season
```

#### åŠ¨æ€ç›¸å…³æ“ä½œ ğŸ†•

```bash
# åˆ—å‡ºç”¨æˆ·æœ€è¿‘çš„åŠ¨æ€
python bili_cli.py list-dynamics 477317922

# åˆ—å‡ºç”¨æˆ·æœ€è¿‘10æ¡åŠ¨æ€
python bili_cli.py list-dynamics 477317922 --limit 10

# ä¸‹è½½ç”¨æˆ·æ‰€æœ‰åŠ¨æ€å’Œè¯„è®ºï¼ˆé»˜è®¤åŒ…å«å…¨éƒ¨è¯„è®ºï¼‰
python bili_cli.py download-dynamics 477317922

# ä¸‹è½½åŠ¨æ€ä½†ä¸åŒ…å«è¯„è®º
python bili_cli.py download-dynamics 477317922 --no-comments

# é™åˆ¶æ¯ä¸ªåŠ¨æ€æœ€å¤š500æ¡è¯„è®ºï¼Œä½¿ç”¨5ä¸ªå¹¶å‘
python bili_cli.py download-dynamics 477317922 --max-comments 500 --concurrent 5

# ä¸‹è½½å•ä¸ªåŠ¨æ€å’Œè¯„è®º
python bili_cli.py download-single-dynamic 123456789

# ä¸‹è½½å•ä¸ªåŠ¨æ€ä½†ä¸åŒ…å«è¯„è®º
python bili_cli.py download-single-dynamic 123456789 --no-comments
```

#### é«˜çº§é€‰é¡¹

```bash
# ä½¿ç”¨ç™»å½•å‡­æ®ä¸‹è½½é«˜ç”»è´¨è§†é¢‘
python bili_cli.py download-video BV1FQbPzKEA8 --credentials credentials.json

# æŒ‡å®šç”»è´¨åå¥½
python bili_cli.py download-video BV1FQbPzKEA8 --quality 1080p60

# ç»„åˆä½¿ç”¨å¤šä¸ªé€‰é¡¹
python bili_cli.py download-user 477317922 --dir ./downloads --concurrent 3 --credentials credentials.json --quality 4k
```

### ğŸ“ é¡¹ç›®ç»“æ„

```
bili_downloader/
â”œâ”€â”€ bili_cli.py              # ä¸»CLIå…¥å£ç‚¹
â”œâ”€â”€ video.py                 # è§†é¢‘ç®¡ç†å™¨å’Œä¸‹è½½å™¨
â”œâ”€â”€ dynamic.py               # åŠ¨æ€ç®¡ç†å™¨å’Œçˆ¬å–å™¨ ğŸ†•
â”œâ”€â”€ requirements.txt         # Pythonä¾èµ–åˆ—è¡¨
â”œâ”€â”€ credentials.json.example # ç™»å½•å‡­æ®æ¨¡æ¿
â”œâ”€â”€ credentials.json         # ç™»å½•å‡­æ®æ–‡ä»¶(éœ€è‡ªè¡Œåˆ›å»º)
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ CLAUDE.md               # å¼€å‘æŒ‡å—
â””â”€â”€ downloads/              # é»˜è®¤ä¸‹è½½ç›®å½•
    â”œâ”€â”€ ç”¨æˆ·å_UID/         # ç”¨æˆ·æ•°æ®ç›®å½•
    â”‚   â”œâ”€â”€ dynamics/       # åŠ¨æ€å’Œè¯„è®ºæ•°æ® ğŸ†•
    â”‚   â””â”€â”€ videos/         # è§†é¢‘æ–‡ä»¶
    â””â”€â”€ single_dynamics/    # å•ä¸ªåŠ¨æ€ä¸‹è½½ ğŸ†•
```

### ğŸ¨ æ”¯æŒçš„ç”»è´¨æ ¼å¼

| ç”»è´¨ | æè¿° | è¦æ±‚ |
|------|------|------|
| 360P | æµç•…ç”»è´¨ | æ— éœ€ç™»å½• |
| 480P | æ¸…æ™°ç”»è´¨ | æ— éœ€ç™»å½• |
| 720P | é«˜æ¸…ç”»è´¨ | æ— éœ€ç™»å½• |
| 1080P | è¶…æ¸…ç”»è´¨ | æ— éœ€ç™»å½• |
| 1080P+ | è¶…æ¸…é«˜ç ç‡ | éœ€è¦ç™»å½• |
| 1080P60 | è¶…æ¸…60å¸§ | éœ€è¦å¤§ä¼šå‘˜ |
| 4K | 4Kè¶…é«˜æ¸… | éœ€è¦å¤§ä¼šå‘˜ |
| HDR | HDRçœŸå½© | éœ€è¦å¤§ä¼šå‘˜ |
| æœæ¯”è§†ç•Œ | æœæ¯”è§†ç•Œ | éœ€è¦å¤§ä¼šå‘˜ |
| 8K | 8Kè¶…é«˜æ¸… | éœ€è¦å¤§ä¼šå‘˜ |

### ğŸ“Š åŠ¨æ€æ•°æ®æ ¼å¼

åŠ¨æ€å’Œè¯„è®ºæ•°æ®ä»¥ JSON æ ¼å¼ä¿å­˜ï¼Œæ¯ä¸ªåŠ¨æ€ä¸€ä¸ªæ–‡ä»¶ï¼ŒåŒ…å«å®Œæ•´çš„å…ƒæ•°æ®ï¼š

```json
{
  "dynamic_info": {
    "id_str": "123456789",
    "type": "DYNAMIC_TYPE_DRAW",
    "modules": {
      "module_author": { "name": "ç”¨æˆ·å", "pub_ts": 1234567890 },
      "module_dynamic": { /* åŠ¨æ€å†…å®¹ */ }
    }
  },
  "comments": {
    "root_comments": [
      {
        "rpid": 1001,
        "content": { "message": "è¯„è®ºå†…å®¹" },
        "member": { "uname": "è¯„è®ºè€…", "avatar": "å¤´åƒURL" },
        "rcount": 5,  // æ¥¼ä¸­æ¥¼æ•°é‡
        "like": 10    // ç‚¹èµæ•°
      }
    ],
    "sub_comments": {
      "1001": [
        { "rpid": 2001, "content": { "message": "æ¥¼ä¸­æ¥¼å›å¤" } }
      ]
    },
    "total_count": 15
  },
  "metadata": {
    "crawl_time": "2024-01-01T12:00:00",
    "dynamic_type": "DYNAMIC_TYPE_DRAW",
    "total_comments": 15
  }
}
```

### ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

### ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼